---
name: branch-workflow
description: ìƒˆë¡œìš´ PR ì‘ì—… ì‹œì‘ ì‹œ main ì—…ë°ì´íŠ¸, ë¡œì»¬ ë¸Œëœì¹˜ ì •ë¦¬, feature ë¸Œëœì¹˜ ìƒì„±
tags: [git, branch, pr, workflow]
---

# Branch Workflow

## ëª©ì 

Local branchë¥¼ ìµœì†Œë¡œ ìœ ì§€í•˜ë©° í•­ìƒ ìµœì‹  main ìœ„ì—ì„œ ì‘ì—…í•˜ëŠ” ì›Œí¬í”Œë¡œìš°.

## ì ìš© ì‹œì 

- ìƒˆë¡œìš´ PR ì‘ì—…ì„ ì‹œì‘í•  ë•Œ
- ì»¤ë°‹ì„ ë§Œë“¤ê¸° ì „ì— ë¸Œëœì¹˜ ìƒíƒœë¥¼ ì •ë¦¬í•  ë•Œ

## ìˆ˜í–‰ ì ˆì°¨

### 1. Main ë¸Œëœì¹˜ ì—…ë°ì´íŠ¸

```bash
git checkout main
git pull origin main
```

### 2. ë¡œì»¬ ë¸Œëœì¹˜ ì •ë¦¬

```bash
# ëª¨ë“  ë¸Œëœì¹˜ì™€ PR ìƒíƒœ í™•ì¸
git branch -a
gh pr list --state all --json number,headRefName,state --jq '.[] | "\(.headRefName) \(.state)"'

# MERGED/CLOSEDëœ PRì˜ ë¡œì»¬ ë¸Œëœì¹˜ ì‚­ì œ
git branch -d <branch-name>

# ì›ê²© ì¶”ì  ë¸Œëœì¹˜ ì •ë¦¬
git remote prune origin
```

### 3. ìƒˆ Feature ë¸Œëœì¹˜ ìƒì„±

```bash
git checkout -b <prefix>/<descriptive-name>
```

## ë¸Œëœì¹˜ ë„¤ì´ë° ê·œì¹™

| ì ‘ë‘ì‚¬ | ìš©ë„ | ì˜ˆì‹œ |
|--------|------|------|
| `feat/` | ìƒˆ ê¸°ëŠ¥ | `feat/add-login` |
| `fix/` | ë²„ê·¸ ìˆ˜ì • | `fix/null-pointer` |
| `docs/` | ë¬¸ì„œ ë³€ê²½ | `docs/update-readme` |
| `refactor/` | ë¦¬íŒ©í† ë§ | `refactor/extract-utils` |

## ë¹ ë¥¸ ì°¸ì¡°

| ë‹¨ê³„ | ëª…ë ¹ì–´ |
|------|--------|
| main ì´ë™ ë° ì—…ë°ì´íŠ¸ | `git checkout main && git pull origin main` |
| ë¸Œëœì¹˜ ëª©ë¡ í™•ì¸ | `git branch -a` |
| PR ìƒíƒœ í™•ì¸ | `gh pr list --state all --json headRefName,state` |
| ë¡œì»¬ ë¸Œëœì¹˜ ì‚­ì œ | `git branch -d <branch-name>` |
| ì›ê²© ì¶”ì  ì •ë¦¬ | `git remote prune origin` |
| ìƒˆ ë¸Œëœì¹˜ ìƒì„± | `git checkout -b feat/<name>` |

## í”í•œ ì‹¤ìˆ˜

| ì‹¤ìˆ˜ | í•´ê²° |
|------|------|
| main ì—…ë°ì´íŠ¸ ì—†ì´ ë¸Œëœì¹˜ ìƒì„± | í•­ìƒ `git pull` ë¨¼ì € |
| ë¨¸ì§€ëœ ë¸Œëœì¹˜ ë°©ì¹˜ | PR ìƒíƒœ í™•ì¸ í›„ ì‚­ì œ |
| ì›ê²© ì¶”ì  ë¸Œëœì¹˜ ëˆ„ì  | `git remote prune origin` ì‹¤í–‰ |

## PR ìƒì„± ì ˆì°¨

ì‘ì—… ì™„ë£Œ í›„ `github-actions[bot]`ìœ¼ë¡œ PRì„ ìƒì„±í•©ë‹ˆë‹¤.

### 1. ì»¤ë°‹ ë° í‘¸ì‹œ

```bash
git add <files>
git commit -m "feat: ..." --trailer "Co-Authored-By: Atlas <atlas@jk.agent>"
git push -u origin <branch-name>
```

### 2. Workflowë¡œ PR ìƒì„±

```bash
gh workflow run create-pr.yml \
  -f branch="<branch-name>" \
  -f title="<pr-title>"
```

### 3. PR ì„¤ëª… ìˆ˜ì •

AI Agentê°€ `gh pr edit`ìœ¼ë¡œ ìƒì„¸ ì„¤ëª…ì„ ì‘ì„±í•©ë‹ˆë‹¤.

```bash
gh pr edit <pr-number> --body "## Summary
- ë³€ê²½ ì‚¬í•­ 1
- ë³€ê²½ ì‚¬í•­ 2

## Test plan
- [x] í…ŒìŠ¤íŠ¸ í•­ëª©

---
ğŸ¤– Generated by github-actions[bot]"
```

## ì›Œí¬í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨

```
ìƒˆ ì‘ì—… ì‹œì‘
     â”‚
     â–¼
mainìœ¼ë¡œ ì´ë™ & pull
     â”‚
     â–¼
ë¡œì»¬ ë¸Œëœì¹˜ ëª©ë¡ í™•ì¸
     â”‚
     â–¼
ê° ë¸Œëœì¹˜ì˜ PR ìƒíƒœ í™•ì¸ â”€â”€â”
     â”‚                    â”‚
     â–¼                    â”‚
PRì´ MERGED/CLOSED? â”€â”€â”€â”€â”€â”€â”¤
     â”‚ yes               â”‚ no/ì—†ìŒ
     â–¼                   â”‚
ë¡œì»¬ ë¸Œëœì¹˜ ì‚­ì œ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
git remote prune origin
     â”‚
     â–¼
ìƒˆ feature ë¸Œëœì¹˜ ìƒì„±
     â”‚
     â–¼
ì‘ì—… & ì»¤ë°‹ & í‘¸ì‹œ
     â”‚
     â–¼
gh workflow run create-pr.yml
     â”‚
     â–¼
gh pr edit (ì„¤ëª… ìˆ˜ì •)
     â”‚
     â–¼
PR ìƒì„± ì™„ë£Œ (github-actions[bot])
```
